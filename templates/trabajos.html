{% extends "base.html" %}

{% block content %}
<h1 class="mb-4">Trabajos</h1>

<a href="{{ url_for('agregar_trabajo') }}" class="btn btn-primary mb-3">+ Agregar Trabajo</a>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Valor Arancel</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for trabajo in trabajos %}
            <tr>
                <td data-label="ID"><strong>{{ trabajo.id }}</strong></td>
                <td data-label="Nombre">{{ trabajo.nombre }}</td>
                <td data-label="Valor Arancel">
                    ${{ "%.2f"|format(trabajo.valor_arancel) if trabajo.valor_arancel else '0.00' }}
                </td>
                <td data-label="Acciones" class="text-end">
                    <a href="{{ url_for('editar_trabajo', id=trabajo.id) }}" class="btn btn-warning btn-sm me-2">Editar</a>
                    <form action="{{ url_for('borrar_trabajo', id=trabajo.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm" 
                                onclick="return confirm('¿Seguro que querés borrar este trabajo?')">Borrar</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-center py-4">No hay trabajos registrados todavía.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Responsive en móvil -->
<style>
    @media (max-width: 768px) {
        .table-responsive { overflow-x: hidden; }
        table, thead, tbody, th, td, tr { display: block; }
        thead tr { position: absolute; top: -9999px; left: -9999px; }
        tr { border: 1px solid #ddd; border-radius: 12px; margin-bottom: 1.5rem; padding: 1rem; background-color: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        td { border: none; position: relative; padding-left: 50% !important; text-align: right; padding-top: 0.75rem; padding-bottom: 0.75rem; }
        td::before { content: attr(data-label); position: absolute; left: 1rem; width: 45%; font-weight: bold; text-align: left; color: #444; }
        td[data-label="Acciones"] { padding-left: 1rem !important; text-align: left; padding-top: 1rem; }
        td[data-label="Acciones"]::before { content: ""; }
        td[data-label="Acciones"] .btn { width: 100%; margin-bottom: 0.5rem; }
    }
</style>
{% endblock %}