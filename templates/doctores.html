{% extends "base.html" %}

{% block content %}
<h1 class="mb-4">Doctores / Dentistas</h1>

<a href="{{ url_for('agregar_doctor') }}" class="btn btn-primary mb-3">+ Agregar Doctor</a>

<!-- Tabla responsive: en celu se convierte en tarjetas -->
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Nombre Completo</th>
                <th>Clínica / Particular</th>
                <th>Dirección</th>
                <th>Teléfono</th>
                <th>CUIT</th>
                <th>Medio de Pago</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for doctor in doctores %}
            <tr>
                <td data-label="Nombre Completo"><strong>{{ doctor.nombre_completo() }}</strong></td>
                <td data-label="Clínica / Particular">{{ doctor.clinica_particular or '-' }}</td>
                <td data-label="Dirección">{{ doctor.direccion or '-' }}</td>
                <td data-label="Teléfono">{{ doctor.telefono or '-' }}</td>
                <td data-label="CUIT">{{ doctor.cuit or '-' }}</td>
                <td data-label="Medio de Pago">{{ doctor.medio_pago or '-' }}</td>
                <td data-label="Acciones">
                    <a href="{{ url_for('editar_doctor', id=doctor.id) }}" class="btn btn-sm btn-warning">Editar</a>
                    <form action="{{ url_for('borrar_doctor', id=doctor.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-sm btn-danger" 
                                onclick="return confirm('¿Seguro que querés borrar este doctor?')">Borrar</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7" class="text-center">No hay doctores registrados todavía.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Estilos para modo tarjetas en móvil -->
<style>
    @media (max-width: 768px) {
        .table-responsive {
            overflow-x: hidden; /* Evita scroll horizontal */
        }
        table, thead, tbody, th, td, tr {
            display: block;
        }
        thead tr {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }
        tr {
            border: 1px solid #ccc;
            border-radius: 8px;
            margin-bottom: 1rem;
            padding: 1rem;
            background-color: #f9f9f9;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        td {
            border: none;
            position: relative;
            padding-left: 50% !important;
            text-align: right;
        }
        td::before {
            content: attr(data-label);
            position: absolute;
            left: 1rem;
            width: 45%;
            font-weight: bold;
            text-align: left;
            color: #555;
        }
        td[data-label="Acciones"] {
            padding-left: 1rem !important;
            text-align: left;
        }
        td[data-label="Acciones"]::before {
            content: "";
        }
    }
</style>
{% endblock %}